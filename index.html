<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>reAlBhed - Realtime Al Bhed Translator</title>
  <link href="style.css" rel="stylesheet">
  <script>
    window.onload = function() {
      var input  = document.getElementById("input");
      var output = document.getElementById("output");
      var engbutton = document.getElementById("english");
      var albutton = document.getElementById("alBhed");
      var title = document.getElementById("title");
      var subtitle = document.getElementById("subtitle");
      var engalpha = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWQYZ";
      var albalpha = "ypltavkrezgmshubxncdijfqowYPLTAVKREZGMSHUBXNCDIJFXOW";
      
      input.focus();
      engbutton.onclick = function() {
        var temp = input.value;
        output.innerHTML = engToAl(input.value);
        title.innerHTML = "reAlBhed - Realtime Al Bhed Translator";
        subtitle.innerHTML = "Use square brackets to [stop translation]";
      }
      albutton.onclick = function() {
        output.innerHTML = alToEng(input.value);
        title.innerHTML = "reAlBhed - Naymdesa Al Bhed Dnyhcmydun";
        subtitle.innerHTML = "Ica cxiyna pnylgadc du [stop translation]";
      }

      
      function engToAl(stringin) {
        var stringout = "";
        var flag = new Boolean(true);
        for (var i = 0; i < stringin.length; i++) {
          if (engalpha.indexOf(stringin[i]) == -1) {
            if (stringin[i] == '[') {
              flag = false;
            } else if (stringin[i] == ']') {
              flag = true;
            } else {
              stringout = stringout + stringin[i];
            }
          } else if (flag == false) {
            stringout = stringout + stringin[i];
          } else {
            stringout = stringout + albalpha.charAt(engalpha.indexOf(stringin[i]));
          }
        }
        return stringout;
      }

      function alToEng(stringin) {
        var stringout = "";
        var flag = new Boolean(true);
        for (var i = 0; i < stringin.length; i++) {
          if (engalpha.indexOf(stringin[i]) == -1) {
            if (stringin[i] == '[') {
              flag = false;
            } else if (stringin[i] == ']') {
              flag = true;
            } else {
              stringout = stringout + stringin[i];
            }
          } else if (flag == false) {
            stringout = stringout + stringin[i];
          } else {
            stringout = stringout + engalpha.charAt(albalpha.indexOf(stringin[i]));
          }
        }
        return stringout;
      }

      input.onkeyup = function() {
        if (engbutton.checked) {
          output.innerHTML = engToAl(input.value);
        } else if (albutton.checked) {
          output.innerHTML = alToEng(input.value);
        } 
      };
    };
  </script>
</head>
<body>
  <div class="container">
    <h1 id="title">reAlBhed - Realtime Al Bhed Translator</h1>
    <h2 id="subtitle">Use square brackets to [stop translation]</h2>
    <textarea id="input" class="box"></textarea><br>
    <input type="radio" name="language" id="english" value="English -> Al Bhed" checked>
    <label for="english">English -> Al Bhed</label>
    <input type="radio" name="language" id="alBhed" value="Al Bhed -> English">
    <label for="alBhed">Al Bhed -> English</label><br>
    <p id="output" class="box"></p>
  </div>
</body>
</html>